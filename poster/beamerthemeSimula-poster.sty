% based on https://www.overleaf.com/latex/templates/writing-posters-with-markdown/jtbgmmgqrqmh
\RequirePackage{tikz}
\usepackage{ragged2e}
\newcommand{\footimage}[1]{\def\footim@ge{#1}}
% \usefonttheme[onlymath]{serif}
\usefonttheme{professionalfonts}

\setbeamertemplate{headline}{
  \begin{beamercolorbox}[wd=\textwidth]{headline}
     \vskip2em\centering
     \parbox{\linewidth}{\normalbaselines\centering\usebeamercolor{title in headline}\color{fg}{\Huge\inserttitle\par}}%
     \vskip2em
  \end{beamercolorbox}

  \begin{beamercolorbox}[wd=\paperwidth]{lower separation line head}
    \rule{0pt}{1em}
  \end{beamercolorbox}
}

\setbeamerfont{headline}{series=\bf,family=\sffamily,size=\Huge}
\setbeamerfont{title}{size=\Huge}
\setbeamerfont{structure}{series=\bf,family=\sffamily,size=\Large}
% \setbeamerfont{footline}{size=\small,family=\sffamily}

\setbeamertemplate{itemize/enumerate body begin}{\vspace*{-1ex}}
\setbeamertemplate{itemize/enumerate body end}{\vspace*{-0.5ex}}

\setbeamertemplate{itemize item}{$\blacktriangleright\,$}
\setbeamertemplate{itemize subitem}{$\bullet$ }
\setlength\leftmargini{3.5em}

\setbeamertemplate{blocks}[rounded]

\newlength{\inboxwd}
\newlength{\iinboxwd}
\newlength{\inboxrule}

\setbeamertemplate{block begin}{
  \par\vskip\medskipamount
  \begin{beamercolorbox}[leftskip=1em,colsep*=.75ex,rounded=true]{block title}%
    \usebeamerfont{block title}\insertblocktitle
  \end{beamercolorbox}%
  {\ifbeamercolorempty[bg]{block body}{}{\nointerlineskip\vskip-0.5pt}}%
  \usebeamerfont{block body}
  % scoot body up to cover lower rounded rects on header box
  \vskip-0.2cm

\begin{beamercolorbox}[sep=-0.1cm, rounded=true,center]{block title}
  \setlength{\inboxwd}{\linewidth}
  \addtolength{\inboxwd}{-0.15cm}
  \begin{beamercolorbox}[rounded=true,wd={\inboxwd},center]{block body}
  \setlength{\iinboxwd}{\inboxwd}
  \setlength{\inboxrule}{\inboxwd}
  \addtolength{\iinboxwd}{-0.1cm}
  \addtolength{\inboxrule}{0.1cm}
  \begin{center}
  \begin{minipage}{\iinboxwd}
  \justifying
}

\setbeamertemplate{block end}{
  \end{minipage}
  \end{center}
  \end{beamercolorbox}
  \end{beamercolorbox}
  \vskip\smallskipamount
}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{footline}{
  \begin{beamercolorbox}[wd=\paperwidth]{upper separation line foot}
    \rule{0pt}{.5em}
  \end{beamercolorbox}
   \begin{beamercolorbox}[wd=\paperwidth]{footline}
     \vskip1.5ex
     \hspace{1em}\usebeamercolor{author in footline}{\bfseries\large\insertauthor}\par\vskip1ex
     \hspace{1em}{\small\ttfamily\bfseries\insertshortauthor}\par\vskip.8ex
     \hspace{1em}\usebeamercolor{institute in footline}{\color{fg}\small\bfseries\insertinstitute}\vskip1ex
   \end{beamercolorbox}
%
\ifdefined\footim@ge
  \tikz[overlay,remember picture]%
  \node[anchor=south east,inner sep=0pt] at (current page.south east) %
  {\footim@ge};
\fi
}
